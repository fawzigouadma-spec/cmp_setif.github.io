<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>إرسال شكوى - CMP SETIF</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body {
      margin: 0;
      font-family: "Tahoma", Arial, sans-serif;
      background: linear-gradient(135deg, #0d6efd, #0a58ca);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .container {
      background: #ffffff;
      width: 95%;
      max-width: 700px;
      padding: 30px;
      border-radius: 14px;
      box-shadow: 0 15px 40px rgba(0,0,0,0.2);
    }

    h1 { text-align: center; color: #0d6efd; margin-bottom: 10px; }
    p.subtitle { text-align: center; color: #555; margin-bottom: 30px; font-size: 15px; }

    .form-group { margin-bottom: 18px; }
    label { display: block; margin-bottom: 6px; font-weight: bold; color: #333; }
    input, select { width: 100%; padding: 10px 12px; border-radius: 8px; border: 1px solid #ccc; font-size: 14px; }
    input:focus, select:focus { outline: none; border-color: #0d6efd; }

    .row { display: flex; gap: 15px; }
    .row .form-group { flex: 1; }

    .btn {
      width: 100%; background: #0d6efd; color: #fff; border: none;
      padding: 14px; font-size: 16px; border-radius: 10px; cursor: pointer; font-weight: bold; transition: 0.3s;
    }
    .btn:hover { background: #084298; }

    footer { text-align: center; margin-top: 20px; font-size: 13px; color: #777; }
  </style>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>

<body>

<div class="container">
  <h1>إرسال شكوى</h1>
  <p class="subtitle">مركز معالجة الشكاوي – إتصالات الجزائر سطيف</p>

  <form id="complaintForm">

    <!-- الولاية -->
    <div class="form-group">
      <label>الولاية</label>
      <input type="text" value="سطيف" readonly>
    </div>

    <!-- المراكز التقنية لإتصالات الجزائر سطيف -->
    <div class="form-group">
      <label>المراكز التقنية لإتصالات الجزائر سطيف</label>
      <select>
        <option value="">المراكز التقنية لإتصالات الجزائر سطيف</option>
        <option>إتصالات الجزائر سطيف
</option>
        <option>إتصالات الجزائر العلمة
</option>
        <option>إتصالات الجزائرعين ولمان
</option>
        <option>إتصالات الجزائربوقاعة
</option>
        <option>إتصالات الجزائرعين الكبيرة
</option>
        <option>إتصالات الجزائرعين أزال 
</option>
      </select>
    </div>
    
    <!-- الاسم واللقب -->
    <div class="row">
      <div class="form-group">
        <label>الاسم</label>
        <input type="text" id="firstName" placeholder="الاسم" required>
      </div>
      <div class="form-group">
        <label>اللقب</label>
        <input type="text" id="lastName" placeholder="اللقب" required>
      </div>
    </div>

    <!-- الهاتف -->
    <div class="row">
      <div class="form-group">
        <label>الهاتف الثابت</label>
        <input type="tel" id="fixedPhone" placeholder="036xxxxxx">
      </div>
      <div class="form-group">
        <label>الهاتف النقال</label>
        <input type="tel" id="mobilePhone" placeholder="05xxxxxxxx">
      </div>
    </div>

    <!-- العنوان -->
    <div class="form-group">
      <label>العنوان</label>
      <input type="text" id="address" placeholder="العنوان الكامل">
    </div>

    <!-- نوع الخدمة -->
    <div class="form-group">
      <label>نوع الخدمة</label>
      <select id="serviceType">
        <option value="">اختر نوع الخدمة</option>
        <option>إنترنت</option>
        <option>هاتف ثابت</option>
        <option>الجيل الرابع 4G</option>
      </select>
    </div>

    <!-- نوع الشكوى -->
    <div class="form-group">
      <label>نوع الشكوى</label>
      <select id="complaintType">
        <option value="">اختر نوع الشكوى</option>
        <option>إنقطاع الخدمة</option>
        <option>بطء شديد في الإنترنت</option>
        <option>تشويش في الخط</option>
        <option>تأخر في التركيب</option>
        <option>تأخر في التحويل</option>
        <option>تعطل الهاتف</option>
      </select>
    </div>

    <!-- موعد التسديد -->
    <div class="form-group">
      <label>موعد تسديد المستحقات (اختياري)</label>
      <input type="date" id="dueDate">
    </div>

    <!-- عدد مرات الشكوى -->
    <div class="form-group">
      <label>عدد مرات تقديم الشكوى (اختياري)</label>
      <input type="number" id="complaintCount" min="0" placeholder="مثال: 1">
    </div>

    <button type="submit" class="btn">إرسال الشكوى</button>

  </form>

  <footer>
    © 2026 CMP SETIF – جميع الحقوق محفوظة
  </footer>
</div>

<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyClGKlEHeuLkzBPx6NAKamYRG7zHhAWkGg",
    authDomain: "les-cmp-setif.firebaseapp.com",
    projectId: "les-cmp-setif",
    storageBucket: "les-cmp-setif.firebasestorage.app",
    messagingSenderId: "300479385524",
    appId: "1:300479385524:web:00ab999b49670176adece1"
  };
  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
</script>
  // التعامل مع إرسال النموذج
  const form = document.getElementById("complaintForm");
  form.addEventListener("submit", function(e) {
    e.preventDefault();

    const data = {
      commune: document.getElementById("commune").value,
      firstName: document.getElementById("firstName").value,
      lastName: document.getElementById("lastName").value,
      fixedPhone: document.getElementById("fixedPhone").value,
      mobilePhone: document.getElementById("mobilePhone").value,
      address: document.getElementById("address").value,
      serviceType: document.getElementById("serviceType").value,
      complaintType: document.getElementById("complaintType").value,
      dueDate: document.getElementById("dueDate").value,
      complaintCount: document.getElementById("complaintCount").value,
      date: new Date()
    };

    db.collection("complaints").add(data)
      .then(() => {
        alert("✅ تم إرسال الشكوى بنجاح");
        form.reset();
      })
      .catch((error) => {
        alert("❌ حدث خطأ أثناء إرسال الشكوى: " + error.message);
      });
  });
</script>

</body>
</html>
